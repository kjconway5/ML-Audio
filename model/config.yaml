# Configuration for 3-Class Keyword Spotting (yes, silence, unknown)
# Based on Google Speech Commands dataset

# Dataset paths and settings
dataset:
  data_dir: "/home/dnocera/ML-Audio/ml/data/speech_commands"
  
data:
  output_dir: "/CSE127/ML-Audio/model/output"
  
  # 3 classes: yes, silence, unknown
  classes:
    - "no"
    - "silence"
    - "unknown"
  
  # Words to use for "unknown" class (all words except "yes")
  unknown_words:
    - "no"
    - "up"
    - "down"
    - "left"
    - "right"
    - "stop"
    - "go"
    # Add more words here if you want more variety for "unknown"
  
  # Data split ratios
  train_ratio: 0.8
  val_ratio: 0.1
  test_ratio: 0.1
  
  # Sampling settings
  yes_sample_ratio: 0.5        # Use 50% of "yes" files (change this to use more/fewer)
  unknown_sample_ratio: 0.3    # Use 30% of "unknown" files per word
  
  # Audio settings
  sample_rate: 16000
  audio_length: 1.0  # seconds (most files are ~1 second)
  
  # Silence generation (from background noise)
  silence_length: 1.0  # seconds
  num_silence_samples: 2000  # How many silence clips to generate

# Preprocessing settings
preprocessing:
  sample_rate: 16000
  n_mels: 40        # Number of mel frequency bins
  n_fft: 512        # FFT size
  hop_length: 160   # 10ms hop at 16kHz
  window_length: 512
  
  # Filters (if using)
  use_filters: false
  hpf_order: 2
  lpf_order: 4
  cutoff_hpf: 150
  cutoff_lpf: 4000

# Model architecture
model:
  n_classes: 3  # yes, silence, unknown
  
  # First convolution layer
  first_conv:
    filters: 64
    kernel_size: [10, 4]
    stride: [2, 2]
  
  # Depthwise Separable blocks
  ds_blocks:
    n_blocks: 4
    filters: 64
    kernel_size: [3, 3]
    stride: [1, 1]

# Training settings
training:
  n_epochs: 20
  batch_size: 64
  
  # Optimizer: SGD with momentum
  optimizer: "sgd"
  learning_rate: 0.1
  momentum: 0.9
  weight_decay: 0.0001
  
  # Learning rate schedule: decay by 0.1 at epochs 5, 10, 15
  lr_schedule:
    milestones: [5, 10, 15]
    gamma: 0.1
  
  # Validation schedule
  val_every: 5  # Validate at epochs 5, 10, 15, 20

# Output settings
output:
  model_save_path: "model_final.pt"
  log_file: "training_log.txt"